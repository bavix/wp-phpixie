{"version":3,"sources":["edit.jsx"],"names":["SocialRows","props","model","socialName","$","socialId","text","id","url","rows","map","row","table","columns","React","Component","socialRows","document","getElementById","$formSocial","socialJson","response","status","json","error","Error","statusText","tableInit","push","ReactDOM","render","submit","event","preventDefault","form","FormData","fetch","attr","method","credentials","body","then","catch","undefined"],"mappings":";;;;;;;;;;IAAMA,U;;;AAEF,wBAAYC,KAAZ,EAAmB;AAAA;;AAAA,uHACTA,KADS;AAElB;;;;kCAES;AACN,mBAAO;AAAA;AAAA;AACP;AAAA;AAAA;AACI;AAAA;AAAA;AAAA;AAAA,qBADJ;AAEI;AAAA;AAAA;AAAA;AAAA,qBAFJ;AAGI;AAAA;AAAA;AAAA;AAAA,qBAHJ;AAII;AAAA;AAAA;AAAA;AAAA;AAJJ;AADO,aAAP;AAQH;;;4BAEGC,K,EAAO;AACP,gBAAMC,aAAaC,EAAE,yBAAyBF,MAAMG,QAA/B,GAA0C,IAA5C,EAAkDC,IAAlD,EAAnB;AACA,mBAAO;AAAA;AAAA,kBAAI,KAAKJ,MAAMK,EAAf;AACH;AAAA;AAAA;AAAKL,0BAAMK;AAAX,iBADG;AAEH;AAAA;AAAA;AAAKJ;AAAL,iBAFG;AAGH;AAAA;AAAA;AAAI;AAAA;AAAA,0BAAG,MAAMD,MAAMM,GAAf,EAAoB,OAAOL,UAA3B,EAAuC,QAAO,SAA9C;AAAyDD,8BAAMM;AAA/D;AAAJ,iBAHG;AAIH;AAJG,aAAP;AAMH;;;iCAEQ;;AAEL,gBAAMC,OAAO,KAAKR,KAAL,CAAWQ,IAAX,CAAgBC,GAAhB,CAAoB,KAAKC,GAAzB,CAAb;;AAEA,gBAAMC,QAAQ;AAAA;AAAA,kBAAO,WAAU,qBAAjB;AACT,qBAAKC,OAAL,EADS;AAEV;AAAA;AAAA;AACEJ;AADF;AAFU,aAAd;;AAOA,mBAAOG,KAAP;AACH;;;;EAvCoBE,MAAMC,S;;AA0C/BX,EAAE,YAAY;;AAEV,QAAMY,aAAaC,SAASC,cAAT,CAAwB,YAAxB,CAAnB;AACA,QAAIC,cAAcf,EAAE,yBAAF,CAAlB;AACA,QAAIgB,aAAa,EAAjB;;AAEA,aAASC,QAAT,CAAkBA,QAAlB,EAA4B;AACxB,YAAIA,SAASC,MAAT,KAAoB,GAApB,IAA2BD,SAASC,MAAT,KAAoB,GAAnD,EAAwD;AACpD,mBAAOD,SAASE,IAAT,EAAP;AACH;;AAED,YAAIC,QAAQ,IAAIC,KAAJ,CAAUJ,SAASK,UAAnB,CAAZ;AACAF,cAAMH,QAAN,GAAiBA,QAAjB;AACA,cAAMG,KAAN;AACH;;AAED,aAASG,SAAT,CAAmBJ,IAAnB,EAAyB;AACrB,YAAI,OAAOA,KAAKhB,EAAZ,KAAmB,WAAvB,EAAoC;AAChCa,yBAAaG,IAAb,CAAkB;AACrB,SAFD,MAGK;AACDH,uBAAWQ,IAAX,CAAgBL,IAAhB;AACH;;AAEDM,iBAASC,MAAT,CACI,oBAAC,UAAD,IAAY,MAAMV,UAAlB,GADJ,EAEIJ,UAFJ;AAIH;;AAEDG,gBAAYY,MAAZ,CAAmB,UAAUC,KAAV,EAAiB;;AAEhCA,cAAMC,cAAN;;AAEA,YAAIC,OAAO,IAAIC,QAAJ,CAAa,IAAb,CAAX;;AAEAC,cAAMjB,YAAYkB,IAAZ,CAAiB,QAAjB,CAAN,EAAkC;AAC9BC,oBAAQnB,YAAYkB,IAAZ,CAAiB,QAAjB,CADsB;AAE9BE,yBAAa,SAFiB;AAG9BC,kBAAMN;AAHwB,SAAlC,EAIGO,IAJH,CAIQpB,QAJR,EAIkBoB,IAJlB,CAIuBd,SAJvB,EAIkCe,KAJlC,CAIwC;AAAA,mBAAMC,SAAN;AAAA,SAJxC;AAMH,KAZD;;AAcAP,UAAMjB,YAAYkB,IAAZ,CAAiB,QAAjB,CAAN,EAAkC;AAC9BC,gBAAQ,KADsB;AAE9BC,qBAAa;AAFiB,KAAlC,EAGGE,IAHH,CAGQpB,QAHR,EAGkBoB,IAHlB,CAGuBd,SAHvB,EAGkCe,KAHlC,CAGwC;AAAA,eAAMC,SAAN;AAAA,KAHxC;AAKH,CAjDD","file":"edit.js","sourcesContent":["class SocialRows extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    columns() {\r\n        return <thead>\r\n        <tr>\r\n            <th>ID</th>\r\n            <th>Type</th>\r\n            <th>URL</th>\r\n            <th>Actions</th>\r\n        </tr>\r\n        </thead>;\r\n    }\r\n\r\n    row(model) {\r\n        const socialName = $('#socialType [value=\"' + model.socialId + '\"]').text();\r\n        return <tr key={model.id}>\r\n            <td>{model.id}</td>\r\n            <td>{socialName}</td>\r\n            <td><a href={model.url} title={socialName} target=\"__blank\">{model.url}</a></td>\r\n            <td></td>\r\n        </tr>;\r\n    }\r\n\r\n    render() {\r\n\r\n        const rows = this.props.rows.map(this.row);\r\n\r\n        const table = <table className=\"table table-striped\">\r\n            {this.columns()}\r\n            <tbody>\r\n            { rows }\r\n            </tbody>\r\n        </table>;\r\n\r\n        return table;\r\n    }\r\n}\r\n\r\n$(function () {\r\n\r\n    const socialRows = document.getElementById('socialRows');\r\n    let $formSocial = $('[data-created=\"social\"]');\r\n    let socialJson = [];\r\n\r\n    function response(response) {\r\n        if (response.status === 201 || response.status === 200) {\r\n            return response.json();\r\n        }\r\n\r\n        let error = new Error(response.statusText);\r\n        error.response = response;\r\n        throw error;\r\n    }\r\n\r\n    function tableInit(json) {\r\n        if (typeof json.id === \"undefined\") {\r\n            socialJson = json;;\r\n        }\r\n        else {\r\n            socialJson.push(json)\r\n        }\r\n\r\n        ReactDOM.render(\r\n            <SocialRows rows={socialJson}/>,\r\n            socialRows\r\n        );\r\n    }\r\n\r\n    $formSocial.submit(function (event) {\r\n\r\n        event.preventDefault();\r\n\r\n        let form = new FormData(this);\r\n\r\n        fetch($formSocial.attr('action'), {\r\n            method: $formSocial.attr('method'),\r\n            credentials: 'include',\r\n            body: form\r\n        }).then(response).then(tableInit).catch(() => undefined);\r\n\r\n    });\r\n\r\n    fetch($formSocial.attr('action'), {\r\n        method: 'GET',\r\n        credentials: 'include'\r\n    }).then(response).then(tableInit).catch(() => undefined);\r\n\r\n});"]}