{"version":3,"sources":["map.jsx"],"names":["autocomplete","mapInited","componentForm","street_number","id","name","route","locality","administrative_area_level_1","country","postal_code","initAutocomplete","google","maps","places","SearchBox","document","getElementById","types","addListener","fillInAddress","map","Map","zoom","center","lat","lng","toForm","place","component","value","i","address_components","length","addressType","doc","getPlaces","geometry","location","initMap","formatted_address","title","coords","marker","Marker","position","draggable","animation","Animation","DROP","event","addDomListener","window","getCenter","trigger","setCenter","loc","geocoder","Geocoder","latlng","LatLng","geocode","results","status","GeocoderStatus","OK"],"mappings":"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","file":"map.js","sourcesContent":["let autocomplete, mapInited = false;\n\nconst componentForm = {\n    street_number: {\n        id: 'streetNumber',\n        name: 'short_name'\n    },\n    route: {\n        id: 'street',\n        name: 'long_name'\n    },\n    locality: {\n        id: 'city',\n        name: 'long_name'\n    },\n    administrative_area_level_1: {\n        id: 'state',\n        name: 'short_name'\n    },\n    country: {\n        id: 'country',\n        name: 'long_name'\n    },\n    postal_code: {\n        id: 'zipCode',\n        name: 'short_name'\n    }\n};\n\nfunction initAutocomplete() {\n\n    autocomplete = new google.maps.places.SearchBox(\n        document.getElementById('autocomplete'),\n        {\n            types: ['geocode']\n        }\n    );\n\n    autocomplete.addListener('places_changed', fillInAddress);\n\n    let map = new google.maps.Map(document.getElementById(\"map\"), {\n        zoom: 15,\n        center: {\n            lat: 45.0392674,\n            lng: 38.987221\n        }\n    });\n\n}\n\nfunction toForm(place) {\n\n    for (let component in componentForm) {\n        document.getElementById(componentForm[component].id).value = '';\n    }\n\n    // Get each component of the address from the place details\n    // and fill the corresponding field on the form.\n    for (let i = 0; i < place.address_components.length; i++) {\n        let addressType = place.address_components[i].types[0];\n        if (typeof componentForm[addressType] !== \"undefined\") {\n            let doc = document.getElementById(componentForm[addressType].id);\n            doc.value = place.address_components[i][componentForm[addressType].name];\n        }\n    }\n\n}\n\nfunction fillInAddress() {\n    'use strict';\n    let place = autocomplete.getPlaces()[0];\n\n    const lat = place.geometry.location.lat();\n    const lng = place.geometry.location.lng();\n\n    document.getElementById('latitude').value = lat;\n    document.getElementById('longitude').value = lng;\n\n    toForm(place);\n\n    initMap(lat, lng, place.formatted_address);\n}\n\nfunction initMap(lat, lng, title) {\n\n    'use strict';\n\n    let coords = {\n        lat: lat,\n        lng: lng\n    };\n\n    let map = new google.maps.Map(document.getElementById(\"map\"), {\n        zoom: 15,\n        center: coords\n    });\n\n    let marker = new google.maps.Marker({\n        position: coords,\n        draggable: true,\n        animation: google.maps.Animation.DROP,\n        map: map,\n        title: title\n    });\n\n    google.maps.event.addDomListener(window, \"resize\", function () {\n        let center = map.getCenter();\n        google.maps.event.trigger(map, \"resize\");\n        map.setCenter(center);\n    });\n\n    google.maps.event.addListener(marker, 'dragend', function () {\n\n        document.getElementById('latitude').value = marker.position.lat();\n        document.getElementById('longitude').value = marker.position.lng();\n\n        const loc = {\n            lat: marker.position.lat(),\n            lng: marker.position.lng()\n        };\n\n        let geocoder = new google.maps.Geocoder();\n        let latlng = new google.maps.LatLng(loc.lat, loc.lng);\n\n        geocoder.geocode({'latLng': latlng}, function (results, status) {\n            if (status == google.maps.GeocoderStatus.OK) {\n                toForm(results[0]);\n            }\n        });\n\n    });\n\n    mapInited = true;\n\n}"]}