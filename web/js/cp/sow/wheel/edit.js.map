{"version":3,"sources":["edit.jsx"],"names":["$","submit","event","preventDefault","$self","form","FormData","fetch","attr","method","credentials","body","then","response","status","json","error","Error","statusText","alert","catch","$message","find","length","prepend","addClass","text","error_description","select2","theme"],"mappings":";;AAAAA,EAAE,YAAY;;AAEVA,MAAE,wBAAF,EAA4BC,MAA5B,CAAmC,UAAUC,KAAV,EAAiB;;AAEhDA,cAAMC,cAAN;;AAEA,YAAIC,QAAQJ,EAAE,IAAF,CAAZ;AACA,YAAIK,OAAO,IAAIC,QAAJ,CAAa,IAAb,CAAX;;AAEAC,cAAMH,MAAMI,IAAN,CAAW,QAAX,CAAN,EAA4B;AACxBC,oBAAQL,MAAMI,IAAN,CAAW,QAAX,CADgB;AAExBE,yBAAa,SAFW;AAGxBC,kBAAMN;AAHkB,SAA5B,EAIGO,IAJH,CAIQ,UAAUC,QAAV,EAAoB;AACxB,gBAAIA,SAASC,MAAT,KAAoB,GAApB,IAA2BD,SAASC,MAAT,KAAoB,GAAnD,EAAwD;AACpD,uBAAOD,SAASE,IAAT,EAAP;AACH;;AAED,gBAAIC,QAAQ,IAAIC,KAAJ,CAAUJ,SAASK,UAAnB,CAAZ;AACAF,kBAAMH,QAAN,GAAiBA,QAAjB;AACA,kBAAMG,KAAN;AACH,SAZD,EAYGJ,IAZH,CAYQ,UAAUG,IAAV,EAAgB;;AAEpB;AACAI,kBAAM,uBAAN;AAEH,SAjBD,EAiBGC,KAjBH,CAiBS,UAAUJ,KAAV,EAAiB;AACtB,gBAAIK,WAAWjB,MAAMkB,IAAN,CAAW,QAAX,CAAf;;AAEA,gBAAI,CAACD,SAASE,MAAd,EAAsB;AAClBnB,sBAAMkB,IAAN,CAAW,iBAAX,EAA8BE,OAA9B,CAAsC,2BAAtC;AACAH,2BAAWjB,MAAMkB,IAAN,CAAW,QAAX,CAAX;AACH;;AAEDN,kBAAMH,QAAN,CAAeE,IAAf,GAAsBH,IAAtB,CAA2B,UAACG,IAAD;AAAA,uBAAUM,SAASI,QAAT,CAAkB,cAAlB,EAAkCC,IAAlC,CAAuCX,KAAKY,iBAA5C,CAAV;AAAA,aAA3B;AACH,SA1BD;AA4BH,KAnCD;;AAqCA;AACA3B,MAAE,aAAF,EAAiB4B,OAAjB,CAAyB;AACrBC,eAAO;AADc,KAAzB;AAIH,CA5CD","file":"edit.js","sourcesContent":["$(function () {\n\n    $('[data-updated=\"wheel\"]').submit(function (event) {\n\n        event.preventDefault();\n\n        let $self = $(this);\n        let form = new FormData(this);\n\n        fetch($self.attr('action'), {\n            method: $self.attr('method'),\n            credentials: 'include',\n            body: form\n        }).then(function (response) {\n            if (response.status === 201 || response.status === 200) {\n                return response.json();\n            }\n\n            let error = new Error(response.statusText);\n            error.response = response;\n            throw error;\n        }).then(function (json) {\n\n            // fixme\n            alert('Информация обновлена!');\n\n        }).catch(function (error) {\n            let $message = $self.find('.alert');\n\n            if (!$message.length) {\n                $self.find('div:first-child').prepend('<div class=\"alert\"></div>');\n                $message = $self.find('.alert');\n            }\n\n            error.response.json().then((json) => $message.addClass('alert-danger').text(json.error_description));\n        });\n\n    });\n\n    // fixme\n    $('#styleWheel').select2({\n        theme: \"bootstrap\"\n    });\n\n});"]}